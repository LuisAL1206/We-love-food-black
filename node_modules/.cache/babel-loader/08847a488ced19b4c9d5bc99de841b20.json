{"ast":null,"code":"import _regeneratorRuntime from\"/Users/AL1206/Desktop/35_frontend/b35-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _defineProperty from\"/Users/AL1206/Desktop/35_frontend/b35-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _asyncToGenerator from\"/Users/AL1206/Desktop/35_frontend/b35-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/AL1206/Desktop/35_frontend/b35-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/Users/AL1206/Desktop/35_frontend/b35-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}function _templateObject(){var data=_taggedTemplateLiteral([\"\\n\\n    mutation LOGIN($email: EmailAddress!,$password: String!) {\\n        login(email: $email, password: $password){\\n            token\\n        }\\n    }\\n\\n\"]);_templateObject=function _templateObject(){return data;};return data;}import React from'react';import{useMutation}from'react-apollo-hooks';import gql from'graphql-tag';import Layout from'../common/Layout';import Input from'../common/Input';import useForm from'../hooks/useForm';var LOGIN_MUTATION=gql(_templateObject());function Login(_ref){var history=_ref.history;var _useMutation=useMutation(LOGIN_MUTATION),_useMutation2=_slicedToArray(_useMutation,1),sendLogin=_useMutation2[0];var catchData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(inputs){var _ref3,data,errors,login;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return sendLogin({variables:_objectSpread({},inputs)});case 2:_ref3=_context.sent;data=_ref3.data;errors=_ref3.errors;if(data){login=data.login;localStorage.setItem('blogToken',login.token);history.push('/');}if(errors)alert(\"Error con tu login \".concat(errors));case 7:case\"end\":return _context.stop();}}},_callee);}));return function catchData(_x){return _ref2.apply(this,arguments);};}();var _useForm=useForm(catchData),inputs=_useForm.inputs,handleSubmit=_useForm.handleSubmit,handleInputChange=_useForm.handleInputChange;return React.createElement(React.Fragment,null,React.createElement(Layout,{head:\"Inicia sesi\\xF3n.\",subhead:\"Es hora de cumplir tus antojos.\"},React.createElement(\"div\",{className:\"container\"},React.createElement(\"div\",{className:\"row\"},React.createElement(\"div\",{className:\"col-lg-8 col-md-10 mx-auto\"},React.createElement(\"form\",{onSubmit:handleSubmit},React.createElement(Input,{name:\"email\",label:\"Email: \",type:\"text\",placeholder:\"Escribe tu email\",value:inputs.email,change:handleInputChange,required:true}),React.createElement(Input,{name:\"password\",label:\"Password: \",type:\"password\",placeholder:\"Escribe tu password\",value:inputs.password,change:handleInputChange,required:true}),React.createElement(\"div\",{className:\"clearfix mt-4\"},React.createElement(\"button\",{className:\"btn btn-primary float-right\",type:\"submit\"},\"Entrar\"))))))));}export default Login;","map":{"version":3,"sources":["/Users/AL1206/Desktop/35_frontend/b35-frontend/src/views/Login.js"],"names":["React","useMutation","gql","Layout","Input","useForm","LOGIN_MUTATION","Login","history","sendLogin","catchData","inputs","variables","data","errors","login","localStorage","setItem","token","push","alert","handleSubmit","handleInputChange","email","password"],"mappings":"03DAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,WAAT,KAA4B,oBAA5B,CACA,MAAOC,CAAAA,GAAP,KAAgB,aAAhB,CACA,MAAOC,CAAAA,MAAP,KAAmB,kBAAnB,CACA,MAAOC,CAAAA,KAAP,KAAkB,iBAAlB,CACA,MAAOC,CAAAA,OAAP,KAAoB,kBAApB,CAEA,GAAMC,CAAAA,cAAc,CAAGJ,GAAH,mBAApB,CAUA,QAASK,CAAAA,KAAT,MAAyB,IAATC,CAAAA,OAAS,MAATA,OAAS,kBACDP,WAAW,CAACK,cAAD,CADV,8CACdG,SADc,kBAGrB,GAAMC,CAAAA,SAAS,2FAAG,iBAAMC,MAAN,oKAEeF,CAAAA,SAAS,CAAC,CAACG,SAAS,kBAAKD,MAAL,CAAV,CAAD,CAFxB,4BAEPE,IAFO,OAEPA,IAFO,CAEDC,MAFC,OAEDA,MAFC,CAGd,GAAID,IAAJ,CAAU,CACEE,KADF,CACYF,IADZ,CACEE,KADF,CAENC,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAkCF,KAAK,CAACG,KAAxC,EACAV,OAAO,CAACW,IAAR,CAAa,GAAb,EACH,CACD,GAAGL,MAAH,CAAWM,KAAK,8BAAuBN,MAAvB,EAAL,CARG,sDAAH,kBAATJ,CAAAA,SAAS,6CAAf,CAHqB,aAkBjBL,OAAO,CAACK,SAAD,CAlBU,CAejBC,MAfiB,UAejBA,MAfiB,CAgBjBU,YAhBiB,UAgBjBA,YAhBiB,CAiBjBC,iBAjBiB,UAiBjBA,iBAjBiB,CAoBrB,MAAO,yCACH,oBAAC,MAAD,EAAQ,IAAI,CAAG,mBAAf,CACA,OAAO,CAAG,iCADV,EAEA,2BAAK,SAAS,CAAC,WAAf,EACI,2BAAK,SAAS,CAAC,KAAf,EACA,2BAAK,SAAS,CAAC,4BAAf,EACI,4BAAM,QAAQ,CAAED,YAAhB,EACI,oBAAC,KAAD,EACA,IAAI,CAAC,OADL,CAEA,KAAK,CAAC,SAFN,CAGA,IAAI,CAAC,MAHL,CAIA,WAAW,CAAC,kBAJZ,CAKA,KAAK,CAAEV,MAAM,CAACY,KALd,CAMA,MAAM,CAAED,iBANR,CAOA,QAAQ,CAAE,IAPV,EADJ,CAUI,oBAAC,KAAD,EACA,IAAI,CAAC,UADL,CAEA,KAAK,CAAC,YAFN,CAGA,IAAI,CAAC,UAHL,CAIA,WAAW,CAAC,qBAJZ,CAKA,KAAK,CAAEX,MAAM,CAACa,QALd,CAMA,MAAM,CAAEF,iBANR,CAOA,QAAQ,CAAE,IAPV,EAVJ,CAmBA,2BAAK,SAAS,CAAC,eAAf,EACI,8BAAQ,SAAS,CAAC,6BAAlB,CAAgD,IAAI,CAAC,QAArD,WADJ,CAnBA,CADJ,CADA,CADJ,CAFA,CADG,CAAP,CAoCH,CAED,cAAef,CAAAA,KAAf","sourcesContent":["import React from 'react';\nimport { useMutation } from 'react-apollo-hooks';\nimport gql from 'graphql-tag';\nimport Layout from '../common/Layout';\nimport Input from '../common/Input'\nimport useForm from '../hooks/useForm';\n\nconst LOGIN_MUTATION = gql`\n\n    mutation LOGIN($email: EmailAddress!,$password: String!) {\n        login(email: $email, password: $password){\n            token\n        }\n    }\n\n`;\n\nfunction Login({history}){\n    const [sendLogin] = useMutation(LOGIN_MUTATION);\n\n    const catchData = async(inputs) =>{\n        // {variables: { email: \"\", password:\"\"}}\n        const {data, errors} = await sendLogin({variables:{...inputs}});\n        if (data) {\n            const { login } = data;\n            localStorage.setItem('blogToken', login.token);\n            history.push('/');\n        }\n        if(errors) alert(`Error con tu login ${errors}`);\n    }\n\n     const {\n        inputs,\n        handleSubmit,\n        handleInputChange,\n    } = useForm(catchData);\n\n    return(<>\n        <Layout head = \"Inicia sesiÃ³n.\"\n        subhead = \"Es hora de cumplir tus antojos.\" >\n        <div className=\"container\">\n            <div className=\"row\">\n            <div className=\"col-lg-8 col-md-10 mx-auto\">\n                <form onSubmit={handleSubmit}>\n                    <Input\n                    name=\"email\"\n                    label=\"Email: \"\n                    type=\"text\"\n                    placeholder=\"Escribe tu email\"\n                    value={inputs.email}\n                    change={handleInputChange}\n                    required={true}\n                    ></Input>\n                    <Input\n                    name=\"password\"\n                    label=\"Password: \"\n                    type=\"password\"\n                    placeholder=\"Escribe tu password\"\n                    value={inputs.password}\n                    change={handleInputChange}\n                    required={true}\n                    ></Input>\n                <div className=\"clearfix mt-4\">\n                    <button className=\"btn btn-primary float-right\" type=\"submit\">\n                        Entrar \n                        </button>\n                </div>\n                </form>\n            </div>\n            </div>\n        </div>\n        </Layout>\n    </>);\n}\n\nexport default Login;"]},"metadata":{},"sourceType":"module"}