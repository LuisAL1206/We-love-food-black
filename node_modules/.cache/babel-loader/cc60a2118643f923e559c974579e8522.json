{"ast":null,"code":"import _regeneratorRuntime from\"/Users/AL1206/Desktop/35_frontend/b35-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _defineProperty from\"/Users/AL1206/Desktop/35_frontend/b35-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _asyncToGenerator from\"/Users/AL1206/Desktop/35_frontend/b35-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/AL1206/Desktop/35_frontend/b35-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/Users/AL1206/Desktop/35_frontend/b35-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}function _templateObject(){var data=_taggedTemplateLiteral([\"\\n    mutation createPost($data:PostInput!){\\n        createNewPost(data:$data){\\n            _id\\n        }\\n    }\\n\"]);_templateObject=function _templateObject(){return data;};return data;}import React,{useState}from'react';import{useMutation}from'react-apollo-hooks';import gql from'graphql-tag';import Layout from'../common/Layout';import Input from'../common/Input';import useForm from'../hooks/useForm';import authHOC from'../utils/authHOC';var CREATE_POST=gql(_templateObject());function Create(_ref){var history=_ref.history;var _useMutation=useMutation(CREATE_POST),_useMutation2=_slicedToArray(_useMutation,1),sendPost=_useMutation2[0];var _useState=useState(''),_useState2=_slicedToArray(_useState,2),cover=_useState2[0],setCover=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),coverPreview=_useState4[0],setCoverPreview=_useState4[1];var catchCover=function catchCover(event){var reader=new FileReader();var file=event.target.files[0];reader.onloadend=function(){setCover(file);setCoverPreview(reader.result);};reader.readAsDataURL(file);};var catchData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(inputs){var _ref3,data,errors;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return sendPost({variables:{data:_objectSpread({},inputs,{cover:cover})}});case 2:_ref3=_context.sent;data=_ref3.data;errors=_ref3.errors;if(data)history.push('/');if(errors)alert(\"Errores: \".concat(errors));case 7:case\"end\":return _context.stop();}}},_callee);}));return function catchData(_x){return _ref2.apply(this,arguments);};}();var _useForm=useForm(catchData),inputs=_useForm.inputs,handleSubmit=_useForm.handleSubmit,handleInputChange=_useForm.handleInputChange;return React.createElement(React.Fragment,null,React.createElement(Layout,{head:\"Tu carrito de compras\",subhead:\"Aqui estan tus antojitos\"},React.createElement(\"div\",{className:\"container\"},React.createElement(\"div\",{className:\"row\"},React.createElement(\"div\",{className:\"col-lg-8 col-md-10 mx-auto\"},React.createElement(\"form\",{onSubmit:handleSubmit},React.createElement(Input,{name:\"title\",label:\"Titulo: \",type:\"text\",placeholder:\"Titulo del post\",value:inputs.title,change:handleInputChange,required:true}),React.createElement(\"div\",{className:\"control-group\"},React.createElement(\"div\",{className:\"form-group floating-label-form-group controls\"},React.createElement(\"label\",null,\"Contenido: \"),React.createElement(\"textarea\",{className:\"form-control\",placeholder:\"Contenido del post \",name:\"content\",onChange:handleInputChange,value:inputs.content,cols:\"30\",rows:\"10\"}))),React.createElement(Input,{name:\"cover\",label:\"Cover: \",type:\"file\",placeholder:\"Selecciona el cover de tu post.\",change:catchCover,required:true}),React.createElement(\"img\",{src:coverPreview,alt:\"\",className:\"d-block w-50\"}),React.createElement(\"div\",{className:\"clearfix mt-4\"},React.createElement(\"button\",{className:\"btn btn-primary float-right\",type:\"submit\"},\"Guardar post.\"))))))));}export default Create;","map":{"version":3,"sources":["/Users/AL1206/Desktop/35_frontend/b35-frontend/src/views/Create.js"],"names":["React","useState","useMutation","gql","Layout","Input","useForm","authHOC","CREATE_POST","Create","history","sendPost","cover","setCover","coverPreview","setCoverPreview","catchCover","event","reader","FileReader","file","target","files","onloadend","result","readAsDataURL","catchData","inputs","variables","data","errors","push","alert","handleSubmit","handleInputChange","title","content"],"mappings":"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","sourcesContent":["import React, {useState} from 'react';\nimport { useMutation } from 'react-apollo-hooks';\nimport gql from 'graphql-tag';\nimport Layout from '../common/Layout';\nimport Input from '../common/Input' \nimport useForm from '../hooks/useForm';\nimport authHOC from '../utils/authHOC';\n\nconst CREATE_POST = gql`\n    mutation createPost($data:PostInput!){\n        createNewPost(data:$data){\n            _id\n        }\n    }\n`;\n\nfunction Create({history}){\n    const [sendPost] = useMutation(CREATE_POST);\n    const [cover,setCover] = useState('');\n    const [coverPreview, setCoverPreview] = useState('');\n\n    const catchCover = event => {\n        const reader = new FileReader();\n        const file = event.target.files[0];\n\n        reader.onloadend = () =>{\n            setCover(file);\n            setCoverPreview(reader.result);\n        } \n\n        reader.readAsDataURL(file);\n\n    }\n\n    const catchData = async (inputs) => {\n        const { data, errors} = await sendPost({variables:{data:{...inputs,cover}}});\n        if(data) history.push('/');\n        if (errors) alert(`Errores: ${errors}`);\n    }\n\n    const {\n        inputs,\n        handleSubmit,\n        handleInputChange,\n    } = useForm(catchData);\n    \n    return(<>\n         <Layout head = \"Tu carrito de compras\"\n        subhead = \"Aqui estan tus antojitos\" >\n        <div className=\"container\">\n            <div className=\"row\">\n            <div className=\"col-lg-8 col-md-10 mx-auto\">\n                <form onSubmit={handleSubmit}>\n                    <Input\n                    name=\"title\"\n                    label=\"Titulo: \"\n                    type=\"text\"\n                    placeholder=\"Titulo del post\"\n                    value={inputs.title}\n                    change={handleInputChange}\n                    required={true}\n                    ></Input>\n                    <div className=\"control-group\">\n                            <div className=\"form-group floating-label-form-group controls\">\n                                <label>Contenido: </label>\n                                <textarea className=\"form-control\" \n                                placeholder=\"Contenido del post \"\n                                name=\"content\" onChange={handleInputChange} value={inputs.content} \n                                cols=\"30\" rows=\"10\"></textarea>\n                            </div>\n                        </div>\n                    <Input\n                    name=\"cover\"\n                    label=\"Cover: \"\n                    type=\"file\"\n                    placeholder=\"Selecciona el cover de tu post.\"\n                    change={catchCover}\n                    required={true}\n                    ></Input>\n                    <img src={coverPreview} alt=\"\" className=\"d-block w-50\"></img>\n        \n                <div className=\"clearfix mt-4\">\n                    <button className=\"btn btn-primary float-right\" type=\"submit\">\n                        Guardar post. \n                        </button>\n                </div>\n                </form>\n            </div>\n            </div>\n        </div>\n        </Layout>\n    </>);\n}\n\nexport default (Create);"]},"metadata":{},"sourceType":"module"}